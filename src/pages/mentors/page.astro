---
import UnivationLayout from "@/layouts/univation-layout.astro";
import UnivationHeader from "@/components/layout/univation-header.astro";
import UnivationFooter from "@/components/layout/univation-footer.astro";

// Removed imports:
// import { slugify } from "@/utils/slugify";
// import { getUniversitiesByCountry, getLogoUrl } from "@/utils/universityRouter";

export async function getStaticPaths() {
  const countries = ["Greece", "Germany", "United States", "Australia"];
  const allUniversities = [];

  for (const country of countries) {
    const universities = await getUniversitiesByCountry(country);
    allUniversities.push(...universities);
  }

  return allUniversities.map((uni) => ({
    params: { slug: slugify(uni.name) },
    props: { university: uni },
  }));
}

const { slug } = Astro.params;
const { university } = Astro.props;

if (!university) {
  return Astro.redirect('/404');
}

// Simulated data for mentorship program (replace with actual data in a real scenario)
const mentorshipProgram = {
  availableMentors: 15,
  activeMentorships: 8,
  topSubjects: ["Computer Science", "Business Administration", "Engineering"],
};

// Simulated data for mentors and professors (replace with actual data in a real scenario)
const universityMentors = [
  { name: "Dr. Jane Smith", field: "Computer Science", rating: 4.8, image: "https://randomuser.me/api/portraits/women/1.jpg" },
  { name: "Prof. John Doe", field: "Business Administration", rating: 4.7, image: "https://randomuser.me/api/portraits/men/1.jpg" },
  { name: "Dr. Emily Brown", field: "Engineering", rating: 4.9, image: "https://randomuser.me/api/portraits/women/2.jpg" },
  { name: "Prof. Michael Lee", field: "Physics", rating: 4.6, image: "https://randomuser.me/api/portraits/men/2.jpg" },
  { name: "Dr. Sarah Johnson", field: "Chemistry", rating: 4.8, image: "https://randomuser.me/api/portraits/women/3.jpg" },
  { name: "Prof. David Wilson", field: "Mathematics", rating: 4.7, image: "https://randomuser.me/api/portraits/men/3.jpg" },
];

// Simulated data for upcoming events (replace with actual data in a real scenario)
const upcomingEvents = [
  { name: "AI in Education Symposium", date: "2023-09-15", type: "Conference" },
  { name: "Career Fair 2023", date: "2023-10-01", type: "Networking" },
  { name: "Research Showcase", date: "2023-10-20", type: "Exhibition" },
];

// Function to get a random image for the university (replace with actual thumbnails in a real scenario)
function getUniversityThumbnail() {
  const images = [
    "https://source.unsplash.com/1600x900/?university,campus",
    "https://source.unsplash.com/1600x900/?college,education",
    "https://source.unsplash.com/1600x900/?school,building"
  ];
  return images[Math.floor(Math.random() * images.length)];
}
---

<UnivationLayout  title={`${university.name} - Mentorship Program`}>
  
  <main class="university-page univation-blue-background overlay ">
      <UnivationHeader />
      <!-- Remove Motion component -->
      <div class="hero" style={`background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('${getUniversityThumbnail()}');`}>
        <div class="hero-content">
          <img 
            src={getLogoUrl(university.domains[0])} 
            alt={`${university.name} logo`}
            class="university-logo"
          />
          <h1>{university.name} Mentorship Program</h1>
        </div>
      </div>
      
      <div class="content-wrapper">
        <a href="/" class="back-button">‚Üê Back to Universities</a>
        
        <div class="university-details">
          <!-- Remove Motion components and just keep the div contents -->
          <div class="info-card glass-morphism">
            <h2>University Information</h2>
            <p><strong>Location:</strong> {university["state-province"] || "N/A"}, {university.country}</p>
            <p><strong>Website:</strong> <a href={university.web_pages[0]} target="_blank" rel="noopener noreferrer">{university.web_pages[0]}</a></p>
            <p><strong>Description:</strong> {university.description || "A leading institution committed to academic excellence and innovation."}</p>
          </div>
          
          <div class="info-card glass-morphism">
            <h2>Mentorship Overview</h2>
            <div class="mentorship-stats">
              <div class="stat">
                <span class="stat-value">{mentorshipProgram.availableMentors}</span>
                <span class="stat-label">Available Mentors</span>
              </div>
              <div class="stat">
                <span class="stat-value">{mentorshipProgram.activeMentorships}</span>
                <span class="stat-label">Active Mentorships</span>
              </div>
            </div>
            <h3>Top Subjects for Mentorship:</h3>
            <ul class="tag-list">
              {mentorshipProgram.topSubjects.map(subject => <li class="tag">{subject}</li>)}
            </ul>
          </div>
          
          <div class="info-card glass-morphism full-width">
            <h2>Connected Professors & Mentors</h2>
            <div class="mentor-grid">
              {universityMentors.map(mentor => (
                <div class="mentor-card">
                  <img src={mentor.image} alt={mentor.name} class="mentor-image" />
                  <div class="mentor-info">
                    <span class="mentor-name">{mentor.name}</span>
                    <span class="mentor-field">{mentor.field}</span>
                    <span class="mentor-rating">Rating: {mentor.rating}/5</span>
                  </div>
                </div>
              ))}
            </div>
          </div>
          
          <div class="info-card glass-morphism">
            <h2>Upcoming Events</h2>
            <ul class="event-list">
              {upcomingEvents.map(event => (
                <li class="event-item">
                  <span class="event-name">{event.name}</span>
                  <span class="event-date">{new Date(event.date).toLocaleDateString()}</span>
                  <span class="event-type">{event.type}</span>
                </li>
              ))}
            </ul>
          </div>
          
          <div class="info-card glass-morphism">
            <h2>Why Join Our Mentorship Program?</h2>
            <p>Our mentorship program connects experienced professionals with university lecturers to enhance teaching skills, research capabilities, and career development. Join us to grow your academic career and make a lasting impact on education.</p>
          </div>
        </div>
        
        <div class="cta-container">
          <a href="#" class="cta-button">Apply as a Mentor</a>
          <a href="#" class="cta-button secondary">Request a Mentor</a>
        </div>
      </div>
      <UnivationFooter />

  </main>

</UnivationLayout>

<style>
  .university-page {
    min-height: 100vh;
  }

  .hero {
    height: 50vh;
    background-size: cover;
    background-position: center;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    text-align: center;
  }

  .hero-content {
    background-color: rgba(0, 0, 0, 0.6);
    padding: 2rem;
    border-radius: 10px;
  }

  .university-logo {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    border: 3px solid white;
    margin-bottom: 1rem;
  }

  .content-wrapper {
    max-width: 1200px;
    margin: -50px auto 0;
    padding: 2rem;
    background-color: white;
    border-radius: 10px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    position: relative;
  }

  .back-button {
    position: absolute;
    top: 1rem;
    left: 1rem;
    padding: 0.5rem 1rem;
    background-color: #f0f0f0;
    color: #333;
    text-decoration: none;
    border-radius: 5px;
    transition: background-color 0.3s ease;
  }

  .back-button:hover {
    background-color: #e0e0e0;
  }

  .university-details {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
  }

  .info-card {
    background-color: #f9f9f9;
    padding: 1.5rem;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
  }

  .info-card h2 {
    margin-top: 0;
    color: #0077b6;
  }

  .cta-container {
    display: flex;
    justify-content: center;
    margin-top: 2rem;
    gap: 1rem;
  }

  .cta-button {
    padding: 0.75rem 1.5rem;
    background-color: #0077b6;
    color: white;
    text-decoration: none;
    border-radius: 5px;
    transition: all 0.3s ease;
    font-weight: bold;
    text-transform: uppercase;
    position: relative;
    overflow: hidden;
  }

  .cta-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      120deg,
      transparent,
      rgba(255, 255, 255, 0.3),
      transparent
    );
    transition: all 0.6s;
  }

  .cta-button:hover::before {
    left: 100%;
  }

  .cta-button:hover {
    background-color: #023e8a;
    transform: translateY(-2px);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }

  .cta-button.secondary {
    background-color: #48cae4;
  }

  .cta-button.secondary:hover {
    background-color: #00b4d8;
  }

  @media (max-width: 768px) {
    .hero {
      height: 30vh;
    }

    .content-wrapper {
      margin-top: -30px;
      padding: 1rem;
    }

    .university-details {
      grid-template-columns: 1fr;
    }

    .cta-container {
      flex-direction: column;
    }
  }

  .glass-morphism {
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
    border-radius: 10px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
  }

  .mentorship-stats {
    display: flex;
    justify-content: space-around;
    margin-bottom: 1rem;
  }

  .stat {
    text-align: center;
  }

  .stat-value {
    font-size: 2rem;
    font-weight: bold;
    color: #0077b6;
  }

  .stat-label {
    font-size: 0.9rem;
    color: #666;
  }

  .tag-list {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    list-style: none;
    padding: 0;
  }

  .tag {
    background-color: #48cae4;
    color: white;
    padding: 0.3rem 0.6rem;
    border-radius: 20px;
    font-size: 0.9rem;
  }

  .mentor-list, .event-list {
    list-style: none;
    padding: 0;
  }

  .mentor-item, .event-item {
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    padding: 0.8rem;
    margin-bottom: 0.8rem;
    display: flex;
    flex-direction: column;
  }

  .mentor-name, .event-name {
    font-weight: bold;
    font-size: 1.1rem;
    color: #0077b6;
  }

  .mentor-field, .mentor-rating, .event-date, .event-type {
    font-size: 0.9rem;
    color: #666;
  }

  .event-date {
    font-style: italic;
  }

  @media (max-width: 768px) {
    .mentor-item, .event-item {
      padding: 0.6rem;
    }
  }

  .full-width {
    grid-column: 1 / -1;
  }

  .mentor-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 1rem;
  }

  .mentor-card {
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    padding: 1rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .mentor-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
  }

  .mentor-image {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    object-fit: cover;
    margin-bottom: 0.5rem;
  }

  .mentor-info {
    display: flex;
    flex-direction: column;
  }

  .mentor-name {
    font-weight: bold;
    font-size: 1rem;
    color: #0077b6;
  }

  .mentor-field, .mentor-rating {
    font-size: 0.8rem;
    color: #666;
  }

  @media (max-width: 768px) {
    .mentor-grid {
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    }
  }
</style>